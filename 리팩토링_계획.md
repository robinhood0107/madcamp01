# PhotoInfo â†’ PostItem í†µí•© ë¦¬íŒ©í† ë§ ê³„íš

## ğŸ“‹ í˜„ì¬ ìƒí™© ë¶„ì„

### PhotoInfo í´ë˜ìŠ¤ (ì‚­ì œ ì˜ˆì •)
- **ìœ„ì¹˜**: `app/src/main/java/com/example/madcamp01/PhotoInfo.java`
- **í•„ë“œ**:
  - `Uri uri` - ë¡œì»¬ ì‚¬ì§„ ì„ íƒ ì‹œ ì‚¬ìš©
  - `Date photoDate` - EXIFì—ì„œ ì¶”ì¶œí•œ ì´¬ì˜ ë‚ ì§œ
  - `Double latitude` - ìœ„ë„
  - `Double longitude` - ê²½ë„
  - `String dayNumber` - ì¼ì°¨ ("1", "2", "3"...)
  - `String imageUrl` - ì—…ë¡œë“œ í›„ URL
  - `String thumbnailUrl` - ì¸ë„¤ì¼ URL

### PostItem í´ë˜ìŠ¤ (ìœ ì§€ ë° í™•ì¥)
- **ìœ„ì¹˜**: `app/src/main/java/com/example/madcamp01/PostItem.java`
- **í˜„ì¬ í•„ë“œ**:
  - ë³‘ë ¬ ë¦¬ìŠ¤íŠ¸ êµ¬ì¡°:
    - `List<String> images` - ì›ë³¸ ì´ë¯¸ì§€ URL
    - `List<String> imageDays` - ì¼ì°¨ ì •ë³´
    - `List<String> imageThumbnails` - ì¸ë„¤ì¼ URL
    - `List<Date> imageDates` - ì´¬ì˜ ì‹œê°
    - `List<Double> imageLatitudes` - ìœ„ë„
    - `List<Double> imageLongitudes` - ê²½ë„
  - ë©”íƒ€ë°ì´í„°: title, userId, startDate, travelDays, isPublic ë“±

### ì‚¬ìš©ì²˜ ë¶„ì„
1. **WriteFragment.java** (104íšŒ ì‚¬ìš©)
   - `List<PhotoInfo> photoInfoList` - ë©”ì¸ ë°ì´í„° ê´€ë¦¬
   - EXIF ì¶”ì¶œ, ì¼ì°¨ ê³„ì‚°, ì—…ë¡œë“œ ë“± ëª¨ë“  ì‘ì—…
   - ì €ì¥ ì‹œ PostItemì˜ ë³‘ë ¬ ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜
   - ìˆ˜ì • ëª¨ë“œ ì‹œ PostItemì„ PhotoInfo ë¦¬ìŠ¤íŠ¸ë¡œ ë³€í™˜

2. **PhotoAdapter.java** (8íšŒ ì‚¬ìš©)
   - `List<PhotoInfo> photoInfoList` - RecyclerView í‘œì‹œìš©
   - ì¼ì°¨ë³„ ê·¸ë£¹í™” í‘œì‹œ

---

## ğŸ¯ ë¦¬íŒ©í† ë§ ëª©í‘œ
- **ë‹¨ì¼ ë°ì´í„° êµ¬ì¡°**: PostItemë§Œ ì‚¬ìš©í•˜ì—¬ ì¤‘ë³µ ì œê±°
- **ë³€í™˜ ë¡œì§ ì œê±°**: PhotoInfo â†” PostItem ë³€í™˜ ì½”ë“œ ì‚­ì œ
- **ì½”ë“œ ë‹¨ìˆœí™”**: WriteFragmentì˜ ë³µì¡ë„ ê°ì†Œ

---

## ğŸ“ ìƒì„¸ ë¦¬íŒ©í† ë§ ê³„íš

### 1ë‹¨ê³„: PostItem í™•ì¥ (ë¡œì»¬ ì‘ì—… ì§€ì›)

#### 1.1 Uri ë¦¬ìŠ¤íŠ¸ ì¶”ê°€
```java
// PostItem.javaì— ì¶”ê°€
private transient List<Uri> imageUris; // ë¡œì»¬ ì‘ì—…ìš© (Parcelable/Firestore ì œì™¸)
```
- `transient` í‚¤ì›Œë“œë¡œ Parcelable/Firestore ì§ë ¬í™” ì œì™¸
- ë¡œì»¬ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì„ì‹œ ë°ì´í„°

#### 1.2 í—¬í¼ ë©”ì„œë“œ ì¶”ê°€
PostItemì— ì¸ë±ìŠ¤ ê¸°ë°˜ ì ‘ê·¼ ë©”ì„œë“œ ì¶”ê°€:
```java
// ì¸ë±ìŠ¤ë¡œ íŠ¹ì • ì‚¬ì§„ì˜ ì •ë³´ ê°€ì ¸ì˜¤ê¸°
public Uri getImageUri(int index)
public Date getImageDate(int index)
public Double getImageLatitude(int index)
// ... ë“±ë“±

// ì‚¬ì§„ ì¶”ê°€/ì‚­ì œ/ìˆ˜ì • ë©”ì„œë“œ
public void addPhoto(Uri uri, Date photoDate, Double lat, Double lon, String dayNumber)
public void removePhoto(int index)
public void updatePhoto(int index, ...)
```

#### 1.3 ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™” ë³´ì¥
ëª¨ë“  ë¦¬ìŠ¤íŠ¸ê°€ nullì´ ë˜ì§€ ì•Šë„ë¡ ìƒì„±ì/ë©”ì„œë“œì—ì„œ ì´ˆê¸°í™” ë³´ì¥

---

### 2ë‹¨ê³„: WriteFragment ë¦¬íŒ©í† ë§

#### 2.1 ë°ì´í„° êµ¬ì¡° ë³€ê²½
```java
// ë³€ê²½ ì „
private List<PhotoInfo> photoInfoList = new ArrayList<>();

// ë³€ê²½ í›„
private PostItem currentPostItem = new PostItem();
```

#### 2.2 ë©”ì„œë“œ ì‹œê·¸ë‹ˆì²˜ ë³€ê²½

**ë³€ê²½ ëŒ€ìƒ ë©”ì„œë“œë“¤:**
1. `processNewPhotos(List<Uri> uris)`
   - PhotoInfo ìƒì„± â†’ PostItemì— ì§ì ‘ ì¶”ê°€
   - `extractExifData(PhotoInfo)` â†’ `extractExifData(int index)` ë˜ëŠ” `extractExifData(Uri uri)`
   - `calculateDayNumber(PhotoInfo)` â†’ `calculateDayNumber(int index)`

2. `extractExifData(PhotoInfo photoInfo)`
   - `extractExifData(Uri uri, int index)` í˜•íƒœë¡œ ë³€ê²½
   - PostItemì˜ í•´ë‹¹ ì¸ë±ìŠ¤ì— ì§ì ‘ ë°ì´í„° ì €ì¥

3. `calculateDayNumber(PhotoInfo photoInfo)`
   - `calculateDayNumber(int index)` í˜•íƒœë¡œ ë³€ê²½
   - PostItemì˜ í•´ë‹¹ ì¸ë±ìŠ¤ì˜ photoDateë¥¼ ì½ì–´ì„œ dayNumber ê³„ì‚°

4. `sortPhotosByDay()`
   - PostItemì˜ ë³‘ë ¬ ë¦¬ìŠ¤íŠ¸ë“¤ì„ í•¨ê»˜ ì •ë ¬
   - ëª¨ë“  ë¦¬ìŠ¤íŠ¸ë¥¼ ë™ì¼í•œ ìˆœì„œë¡œ ì¬ì •ë ¬

5. `uploadPhotoWithThumbnail(PhotoInfo photoInfo, ...)`
   - `uploadPhotoWithThumbnail(int index, ...)` í˜•íƒœë¡œ ë³€ê²½
   - PostItemì˜ í•´ë‹¹ ì¸ë±ìŠ¤ì—ì„œ Uri, imageUrl ë“± ì½ê¸°

6. `savePostInfoToFirestore(...)`
   - PhotoInfo ë¦¬ìŠ¤íŠ¸ ìˆœíšŒ â†’ PostItemì˜ ë¦¬ìŠ¤íŠ¸ ì§ì ‘ ì‚¬ìš©
   - ë³€í™˜ ë¡œì§ ëŒ€ë¶€ë¶„ ì œê±° ê°€ëŠ¥

#### 2.3 ìˆ˜ì • ëª¨ë“œ ë¡œì§ ë³€ê²½
```java
// ë³€ê²½ ì „: PostItem â†’ PhotoInfo ë¦¬ìŠ¤íŠ¸ ë³€í™˜
PostItem postItem = getArguments().getParcelable("postItem");
for (int i = 0; i < images.size(); i++) {
    PhotoInfo photoInfo = new PhotoInfo(...);
    // ... ë³€í™˜ ì‘ì—…
    photoInfoList.add(photoInfo);
}

// ë³€ê²½ í›„: PostItem ì§ì ‘ ì‚¬ìš©
PostItem postItem = getArguments().getParcelable("postItem");
currentPostItem = postItem; // ì§ì ‘ ì‚¬ìš©
// Uri ë¦¬ìŠ¤íŠ¸ëŠ” imagesì—ì„œ ì¬ìƒì„± (í•„ìš”ì‹œ)
```

---

### 3ë‹¨ê³„: PhotoAdapter ë¦¬íŒ©í† ë§

#### 3.1 ë°ì´í„° êµ¬ì¡° ë³€ê²½
```java
// ë³€ê²½ ì „
private List<PhotoInfo> photoInfoList;

// ë³€ê²½ í›„
private PostItem postItem;
```

#### 3.2 ë©”ì„œë“œ ìˆ˜ì •
1. `PhotoAdapter(PostItem postItem, Context context)` - ìƒì„±ì ë³€ê²½
2. `updateAdapterItems()`
   - `photoInfoList` ìˆœíšŒ â†’ `postItem.getImages().size()` ê¸°ë°˜ìœ¼ë¡œ ìˆœíšŒ
   - `photoInfo.getDayNumber()` â†’ `postItem.getImageDays().get(i)`
   - `photoInfo.getUri()` â†’ `postItem.getImageUri(i)`
   - `photoInfo.getImageUrl()` â†’ `postItem.getImages().get(i)`

3. `onBindViewHolder()`
   - PhotoInfo ì ‘ê·¼ â†’ PostItem ì¸ë±ìŠ¤ ê¸°ë°˜ ì ‘ê·¼ìœ¼ë¡œ ë³€ê²½

4. `AdapterItem` ë‚´ë¶€ í´ë˜ìŠ¤
   - `PhotoInfo photoInfo` â†’ `int photoIndex` (PostItem ë‚´ ì¸ë±ìŠ¤)

---

### 4ë‹¨ê³„: ë³€í™˜ ë¡œì§ ì œê±°

#### 4.1 WriteFragmentì—ì„œ ì œê±°í•  ì½”ë“œ
- `savePostInfoToFirestore()` ë‚´ë¶€ì˜ PhotoInfo â†’ PostItem ë³€í™˜ ë£¨í”„
- ìˆ˜ì • ëª¨ë“œì˜ PostItem â†’ PhotoInfo ë³€í™˜ ë£¨í”„

#### 4.2 ì¤‘ë³µ ì½”ë“œ ì •ë¦¬
- PhotoInfo ê´€ë ¨ import ì œê±°
- PhotoInfo íƒ€ì… ì„ ì–¸ ì œê±°

---

### 5ë‹¨ê³„: PhotoInfo.java ì‚­ì œ

#### 5.1 ìµœì¢… í™•ì¸
- [ ] WriteFragmentì—ì„œ PhotoInfo ì‚¬ìš© ì—†ìŒ
- [ ] PhotoAdapterì—ì„œ PhotoInfo ì‚¬ìš© ì—†ìŒ
- [ ] ë‹¤ë¥¸ íŒŒì¼ì—ì„œ PhotoInfo ì°¸ì¡° ì—†ìŒ

#### 5.2 íŒŒì¼ ì‚­ì œ
- `app/src/main/java/com/example/madcamp01/PhotoInfo.java` ì‚­ì œ

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

### 1. ì¸ë±ìŠ¤ ë™ê¸°í™”
- PostItemì˜ ëª¨ë“  ë³‘ë ¬ ë¦¬ìŠ¤íŠ¸ëŠ” í•­ìƒ ê°™ì€ í¬ê¸° ìœ ì§€
- ì¶”ê°€/ì‚­ì œ ì‹œ ëª¨ë“  ë¦¬ìŠ¤íŠ¸ì— ë™ì‹œ ì ìš©

### 2. Uri ì²˜ë¦¬
- `imageUris`ëŠ” ë¡œì»¬ ì‘ì—…ìš©ì´ë¯€ë¡œ Firestore ì €ì¥ ì‹œ ì œì™¸
- ì—…ë¡œë“œ ì™„ë£Œ í›„ `imageUris`ëŠ” nullë¡œ ì„¤ì • ê°€ëŠ¥

### 3. null ì•ˆì „ì„±
- ëª¨ë“  ë¦¬ìŠ¤íŠ¸ ì ‘ê·¼ ì „ null ì²´í¬
- ì¸ë±ìŠ¤ ë²”ìœ„ ì²´í¬

### 4. ì •ë ¬ ë¡œì§
- `sortPhotosByDay()`ì—ì„œ ëª¨ë“  ë³‘ë ¬ ë¦¬ìŠ¤íŠ¸ë¥¼ ë™ì¼í•œ ìˆœì„œë¡œ ì •ë ¬
- Comparatorë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ë¦¬ìŠ¤íŠ¸ ë™ì‹œ ì •ë ¬

### 5. ê¸°ì¡´ ë°ì´í„° í˜¸í™˜ì„±
- Firestoreì—ì„œ ê°€ì ¸ì˜¨ PostItemì€ `imageUris`ê°€ null (ì •ìƒ)
- ë¡œì»¬ì—ì„œ ìƒˆë¡œ ì¶”ê°€í•œ ì‚¬ì§„ë§Œ `imageUris`ì— ê°’ ì¡´ì¬

---

## ğŸ“Š ì˜ˆìƒ íš¨ê³¼

### ì½”ë“œ ë¼ì¸ ìˆ˜ ê°ì†Œ
- PhotoInfo.java: ~78ì¤„ ì‚­ì œ
- WriteFragment.java: ë³€í™˜ ë¡œì§ ~50ì¤„ ê°ì†Œ
- **ì´ ~130ì¤„ ê°ì†Œ ì˜ˆìƒ**

### ë³µì¡ë„ ê°ì†Œ
- ë°ì´í„° êµ¬ì¡°: 2ê°œ â†’ 1ê°œ
- ë³€í™˜ ë¡œì§: ì œê±°
- ë²„ê·¸ ê°€ëŠ¥ì„±: ì¸ë±ìŠ¤ ë™ê¸°í™” ë¬¸ì œ ê°ì†Œ

### ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ
- ë‹¨ì¼ ë°ì´í„° êµ¬ì¡°ë¡œ ì´í•´í•˜ê¸° ì‰¬ì›€
- ë³€í™˜ ë¡œì§ ì œê±°ë¡œ ë²„ê·¸ ë°œìƒ ì§€ì  ê°ì†Œ

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### PostItem í™•ì¥
- [ ] `imageUris` í•„ë“œ ì¶”ê°€ (transient)
- [ ] í—¬í¼ ë©”ì„œë“œ ì¶”ê°€ (getImageUri, addPhoto, removePhoto ë“±)
- [ ] ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™” ë³´ì¥

### WriteFragment ìˆ˜ì •
- [ ] `photoInfoList` â†’ `currentPostItem` ë³€ê²½
- [ ] `processNewPhotos()` ìˆ˜ì •
- [ ] `extractExifData()` ìˆ˜ì •
- [ ] `calculateDayNumber()` ìˆ˜ì •
- [ ] `sortPhotosByDay()` ìˆ˜ì •
- [ ] `uploadPhotoWithThumbnail()` ìˆ˜ì •
- [ ] `savePostInfoToFirestore()` ìˆ˜ì •
- [ ] ìˆ˜ì • ëª¨ë“œ ë¡œì§ ë³€ê²½
- [ ] PhotoInfo import ì œê±°

### PhotoAdapter ìˆ˜ì •
- [ ] `photoInfoList` â†’ `postItem` ë³€ê²½
- [ ] ìƒì„±ì ìˆ˜ì •
- [ ] `updateAdapterItems()` ìˆ˜ì •
- [ ] `onBindViewHolder()` ìˆ˜ì •
- [ ] `AdapterItem` ë‚´ë¶€ í´ë˜ìŠ¤ ìˆ˜ì •
- [ ] PhotoInfo import ì œê±°

### ìµœì¢… ì •ë¦¬
- [ ] PhotoInfo.java ì‚­ì œ
- [ ] ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ í™•ì¸
- [ ] ë¹Œë“œ ì—ëŸ¬ ì—†ìŒ í™•ì¸

---

## ğŸ”„ ì‘ì—… ìˆœì„œ (ê¶Œì¥)

1. **PostItem í™•ì¥** (ê¸°ëŠ¥ ì¶”ê°€, ê¸°ì¡´ ì½”ë“œ ì˜í–¥ ì—†ìŒ)
2. **WriteFragment ë¦¬íŒ©í† ë§** (ê°€ì¥ í° ë³€ê²½)
3. **PhotoAdapter ë¦¬íŒ©í† ë§** (WriteFragmentì™€ ì—°ë™)
4. **ìµœì¢… ì •ë¦¬ ë° ì‚­ì œ** (PhotoInfo.java ì‚­ì œ)

ê° ë‹¨ê³„ë§ˆë‹¤ ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ì—¬ ì •ìƒ ì‘ë™ í™•ì¸ í•„ìš”!
